<div>
  <div class="filters">
    <mat-form-field>
      <mat-label>Filter by name</mat-label>
      <input matInput type="text" [ngModel]="filterText()" (ngModelChange)="filterText.set($event)"
        placeholder="Enter domain name to filter" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Division</mat-label>
      <mat-select [ngModel]="selectedDivision()" (ngModelChange)="onDivisionChange($event)">
        <mat-option value="all">All</mat-option>
        @for (division of divisions(); track division.division) {
        <mat-option [value]="division.division">{{ division.division }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Sub-division</mat-label>
      <mat-select [ngModel]="selectedSubDivision()" (ngModelChange)="selectedSubDivision.set($event)">
        <mat-option value="all">All</mat-option>
        @for (subDivision of subDivisions(); track subDivision) {
        <mat-option [value]="subDivision">{{ subDivision }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  @for (domain of filteredDomains(); track domain.name) {
  <ul>
    <li>
      @if (domain.dataFlowFile) {
      <a [routerLink]="['/domain-flow', domain.name]" matTooltip="View the list of services the domain goes through">
        {{ domain.name }}
      </a>
      } @else {
        {{ domain.name }}
      }
      <span class="division">({{ domain.division }} / {{ domain['sub-division'] }})</span>
      <br>
      {{ domain.description }}
    </li>
  </ul>
  } @empty {
  <p>No matching domains found.</p>
  }
</div>